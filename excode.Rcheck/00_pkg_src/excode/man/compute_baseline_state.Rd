% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/initModel.R
\name{compute_baseline_state}
\alias{compute_baseline_state}
\title{Update EXCODE model by setting baseline states in surv_ts}
\usage{
compute_baseline_state(excode_multistate, weights_threshold_baseline = 1)
}
\arguments{
\item{excode_multistate}{An \code{excodeModel} returned by \code{init_excode()}
with a \code{"MultiState"} emission.}

\item{weights_threshold_baseline}{Numeric residual cutoff; residuals strictly below
this threshold are labeled baseline (\code{0}). Default \code{1}.}
}
\value{
The **updated** \code{excodeModel} with
  \code{excode_multistate@emission@excode_formula@surv_ts$state} set.
}
\description{
Fits a quasi-Poisson GLM using the **background formula** stored in
\code{excode_multistate@emission@excode_formula@formula_bckg} on the data found in
\code{excode_multistate@emission@excode_formula@surv_ts} (optionally augmented with
covariates from \code{@data} if present), computes Anscombe residuals, and **writes**
a \code{state} column back into \code{@surv_ts}: entries are \code{0} when residuals
are below \code{weights_threshold_baseline} (or the observed count is \code{0}), and
\code{NA} otherwise. Returns the updated \code{excodeModel}.
}
